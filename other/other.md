# 杂七杂八

#### 雪花算法
•	最高位是符号位，始终为0，不可用。   
•	41位的时间序列，精确到毫秒级，41位的长度可以使用69年。时间位还有一个很重要的作用是可以根据时间进行排序。   
•	10位的机器标识，10位的长度最多支持部署1024个节点。   
•	12位的计数序列号，序列号即一系列的自增id，可以支持同一节点同一毫秒生成多个ID序号，12位的计数序列号支持每个节点每毫秒产生4096个ID序号。 

#### 对一个文件的单词进行计数
```
awk -F '[,:]'  '{a[$4]++}  END{for(i in a)print i "-->"  a[i]}' 20190524.csv    
awk -F ' '  '{a[$6]++}  END{for(i in a)print i "-->"  a[i]}' ./1.txt 
```

top –H看线程

#### DB和缓存一致性
更新db，删除缓存，发个延迟消费的mq，隔1s消费，然后再删除缓存。存mq不成功怎么办，使用binlog监听或者存数据库定时扫描
或者xa分布式事物

#### shell的执行过程
1、非内置命令和内置命令
内置命令会改变shell的参数，比如cd,echo，exit等。内置命令实际上shell程序的一部分，其中包含的是一些比较简单的linux系统命令，这些命令由shell程序识别并在shell程序内部完成运行。通常在linux系统加载运行时shell就被加载并驻留在系统内存中。内置命令是写在bashy源码里面的，其执行速度比外部命令快，因为内部命令shell不需要创建子进程。    
非内置命令他不会改变shell的参数，比如ls。非内置命令是linux系统中的实用程序部分，因为实用程序的功能通常都比较强大，所以包含的程序量很大，在系统加载时并不随系统一起被加载到内存中，而是在需要的时候才将其调入内存。通常非内置命令的实体并不包含在shell中，但是其命令执行过程是由shell控制的。shell程序管理非内置命令执行的路径查找、加载存放、控制命令的执行。非内置命令是在bash之外安装的，通常放在/bin、/usr/bin，/sbin、/usr/bin等下面。   
一般而言，which命令能够查到的命令都是非内置命令。还有type也可以判别内置和非内置命令。   

2、对于非内置命令，比如ls，它的执行过程如图：    

对于非内置命令,父shell先fork一个子shell，然后子进程去执行bash的代码，从文本中一行一行的读取命令，然后再派生一个孙子进程去执行这些命令。

#### 布隆过滤器
（crc32 4个byte 32个bit，或者crc16 16个bit）进行hash散列，或者从url找到唯一的数值型，用bitmap
字符串转数值，一个字符是uint8
